# 주식 시장 AI 분석 서비스 아키텍처

## 시스템 개요
이 시스템은 한국과 미국 주식 시장 데이터를 수집하고, 임베딩을 생성하여 RAG(Retrieval-Augmented Generation) 기반으로 시장 동향을 요약하고 투자 가치가 있는 블루칩 주식을 추천하는 서비스입니다. 또한 AI를 활용한 모의 투자 기능을 제공하여 사용자에게 AI 투자 도구의 효과를 보여줍니다.

## 주요 구성 요소

### 1. 데이터 수집 모듈
- **한국 주식 시장 데이터 수집기**: 한국 주식 시장의 주요 지수 및 개별 주식 데이터 수집
- **미국 주식 시장 데이터 수집기**: 미국 주식 시장의 주요 지수 및 개별 주식 데이터 수집
- **데이터 정제 및 전처리 파이프라인**: 수집된 데이터를 정제하고 분석에 적합한 형태로 변환

### 2. 임베딩 및 RAG 시스템
- **텍스트 임베딩 엔진**: 주식 시장 데이터 및 뉴스를 벡터로 변환
- **벡터 저장소**: 생성된 임베딩을 저장하고 효율적으로 검색할 수 있는 저장소
- **RAG 파이프라인**: 검색 기반 생성을 통해 시장 동향 요약 및 투자 추천 생성

### 3. AI 통합 및 모의 투자 모듈
- **AI API 통합 인터페이스**: OpenAI, Mistral, Gemini 등 다양한 AI 서비스와 연동
- **로컬 AI 연동 모듈**: 사용자의 로컬 AI 모델과 연동할 수 있는 인터페이스
- **모의 투자 엔진**: AI 분석 결과를 기반으로 $100부터 시작하는 모의 투자 실행
- **투자 성과 추적기**: 모의 투자의 성과를 추적하고 분석하는 모듈

### 4. 데이터베이스 (Neo4j)
- **그래프 데이터베이스**: 주식 시장 데이터, 임베딩, 투자 결정 등을 저장
- **RAG 지식 베이스**: 검색 및 생성에 필요한 지식을 그래프 형태로 저장
- **시계열 데이터 저장소**: 주가 및 투자 성과의 시계열 데이터 저장

### 5. 사용자 인터페이스
- **웹 UI**: 시장 분석, 투자 추천, 모의 투자 성과 등을 보여주는 웹 인터페이스
- **텔레그램 봇**: 주요 분석 결과 및 알림을 텔레그램을 통해 제공하는 봇
- **API 키 관리 인터페이스**: 다양한 AI 서비스의 API 키를 관리하는 인터페이스

## 기술 스택

### 백엔드
- **언어**: Python 3.10+
- **웹 프레임워크**: FastAPI
- **비동기 작업 처리**: Celery + Redis
- **데이터 처리**: Pandas, NumPy
- **임베딩 생성**: Sentence-Transformers, HuggingFace Transformers
- **AI API 클라이언트**: OpenAI API, Mistral API, Google Gemini API

### 프론트엔드
- **프레임워크**: React.js
- **상태 관리**: Redux
- **UI 라이브러리**: Material-UI
- **차트 라이브러리**: Chart.js, D3.js

### 데이터베이스
- **그래프 데이터베이스**: Neo4j
- **캐싱**: Redis

### 인프라
- **컨테이너화**: Docker, Docker Compose
- **메시지 브로커**: RabbitMQ
- **로깅**: ELK Stack (Elasticsearch, Logstash, Kibana)

### 텔레그램 봇
- **프레임워크**: python-telegram-bot

## 데이터 흐름
1. 스케줄러가 정기적으로 한국 및 미국 주식 시장 데이터 수집 작업 트리거
2. 수집된 데이터는 전처리 후 Neo4j에 저장되고 임베딩 생성
3. 사용자 요청 또는 일일 스케줄에 따라 RAG 시스템이 시장 동향 요약 및 투자 추천 생성
4. AI 모델이 생성된 요약 및 추천을 기반으로 모의 투자 결정
5. 투자 결정 및 성과는 Neo4j에 저장되고 웹 UI 및 텔레그램 봇을 통해 사용자에게 전달

## 배포 아키텍처
- 모든 서비스는 Docker 컨테이너로 패키징
- Docker Compose를 통해 서비스 간 의존성 및 네트워크 설정
- 환경 변수를 통한 설정 관리 (.env 파일)
- Debian Bookworm 기반 LXC 컨테이너에서 실행 가능
- AI 모델은 외부 서비스 제공자 또는 로컬 호스트에서 호스팅 (API 호출만 처리)
